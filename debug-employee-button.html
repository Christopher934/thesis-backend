<!DOCTYPE html>
<html>
<head>
    <title>Debug Employee Button</title>
</head>
<body>
    <h1>Debug "Buat Pegawai" Button</h1>
    <button onclick="openEmployeePageAndTest()">Open Employee Page and Test Button</button>
    <div id="log"></div>

    <script>
        function log(message) {
            document.getElementById('log').innerHTML += '<p>' + new Date().toLocaleTimeString() + ': ' + message + '</p>';
        }

        async function openEmployeePageAndTest() {
            try {
                // Step 1: Login
                log('Logging in...');
                const loginRes = await fetch('http://localhost:3001/auth/login', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ email: 'admin@rsud.id', password: 'admin123' })
                });
                
                if (!loginRes.ok) {
                    throw new Error('Login failed');
                }
                
                const loginData = await loginRes.json();
                localStorage.setItem('token', loginData.access_token);
                log('✅ Login successful, token saved');

                // Step 2: Open employee page
                log('Opening employee page...');
                window.open('http://localhost:3000/dashboard/list/pegawai', '_blank');
                
                log('✅ Employee page opened in new tab');
                log('Now try clicking the "Buat Pegawai" button (plus icon) in the new tab');
                log('Check browser console in the new tab for any error messages');

            } catch (error) {
                log('❌ Error: ' + error.message);
            }
        }
    </script>
</body>
</html>
